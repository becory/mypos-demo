(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51311e6f"],{"0797":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container components-container"},[a("h2",[e._v("上架狀態設定")]),a("TableView",{ref:"main",staticClass:"table",attrs:{data:e.data,"column-options":e.columnOptions,form:e.formBody,"table-options":{isCanSelection:!0},rules:e.rules,page:e.page[0],"page-size":e.pageSize[0],loading:e.loading[0]},on:{search:e.getDataset,refresh:e.getDataset,delete:e.deleteDataset,create:e.createDataset,edit:e.editDataset,"select-row":e.onSelectRow}})],1)},r=[],i=(a("d3b7"),a("4ec3")),o=a("0253"),c=a("6464"),s={name:"MenuStatus",components:{TableView:o["a"]},data:function(){return{loading:[!1],page:[1],pageSize:[10],data:[],selectRow:{}}},computed:{columnOptions:function(){return[{label:"狀態名稱",field:"name"},{label:"狀態",field:"itemType"},{label:"開始日期",field:"startDate"},{label:"結束日期",field:"endDate"},{label:"販售星期",field:"week"}]},formBody:function(){return[{label:"狀態名稱",field:"name",type:"text",inputType:"el-input"},{label:"狀態",field:"itemType",type:"text",inputType:"el-radio-group",dataset:[{value:"N",label:"常態商品"},{value:"E",label:"週末"},{value:"W",label:"週間特別"},{value:"S",label:"期間限定"},{value:"O",label:"下架"}]},{label:"開始日期",field:"startDate",type:"date",inputType:"el-date-picker",options:{"value-format":"yyyy-MM-dd"}},{label:"結束日期",field:"endDate",type:"date",inputType:"el-date-picker",options:{"value-format":"yyyy-MM-dd"}},{label:"販售星期",field:"week",type:"select",inputType:"el-select",dataset:this.getWeekOptions,options:{multiple:!0}}]},rules:function(){return{name:[{required:!0,message:"必填欄位",trigger:"blur"}],itemType:[{required:!0,message:"必填欄位",trigger:"blur"}],startDate:[{required:!0,message:"必填欄位",trigger:"blur"}],endDate:[{required:!0,message:"必填欄位",trigger:"blur"}]}}},mounted:function(){this.getDataset()},methods:{getColumnOptions:function(){var e=this;Object(i["A"])("?columns=true").then((function(t){e.columnOptions=t.data})).catch((function(e){Object(c["a"])("error","Error",e,!1)}))},getWeekOptions:function(){return Object(i["K"])("?selection=name").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Object(c["a"])("error","Error",e,!1),Promise.reject()}))},getDataset:function(e){var t=this;this.$set(this.loading,0,!0);var a="?page="+this.page[0]+"&page_size="+this.pageSize[0];e&&(a+="&search="+e),Object(i["A"])(a).then((function(e){t.data=e.data})).catch((function(e){Object(c["a"])("error","Error",e,!1)})).finally((function(){t.$set(t.loading,0,!1)}))},getFormBody:function(){var e=this;Object(i["z"])().then((function(t){e.formBody=t.data})).catch((function(e){Object(c["a"])("error","Error",e,!1)}))},deleteDataset:function(e){Object(i["j"])(e.id).then((function(e){Object(c["a"])("success","Delete Success",e.data,!1)})).catch((function(e){Object(c["a"])("error","Error",e,!1)}))},createDataset:function(e){var t=this;Object(i["T"])(e).then((function(e){Object(c["a"])("success","Create Success",e.data,!1),t.$refs["main"].createDialog=!1,t.$refs["main"].formBody={},t.$refs["main"].editItem={},t.getDataset()})).catch((function(e){Object(c["a"])("error","Error",e,!1)}))},editDataset:function(e){var t=this;Object(i["fb"])(e.id,e.data).then((function(e){Object(c["a"])("success","Edit Success",e.data,!1),t.$refs["main"].createDialog=!1,t.$refs["main"].formBody={},t.$refs["main"].editItem={},t.getDataset()})).catch((function(e){Object(c["a"])("error","Error",e,!1)}))},onSelectRow:function(e){this.selectRow=e}}},l=s,u=(a("d027"),a("2877")),d=Object(u["a"])(l,n,r,!1,null,null,null);t["default"]=d.exports},"8a0c":function(e,t,a){},d027:function(e,t,a){"use strict";a("8a0c")}}]);