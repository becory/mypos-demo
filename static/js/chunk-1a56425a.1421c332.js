(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a56425a"],{"4c53":function(e,t,a){"use strict";var n=a("23e7"),s=a("857a"),r=a("af03");n({target:"String",proto:!0,forced:r("sub")},{sub:function(){return s(this,"sub","","")}})},"77c4":function(e,t,a){},"857a":function(e,t,a){var n=a("1d80"),s=/"/g;e.exports=function(e,t,a,r){var i=String(n(e)),c="<"+t;return""!==a&&(c+=" "+a+'="'+String(r).replace(s,"&quot;")+'"'),c+">"+i+"</"+t+">"}},"9b62":function(e,t,a){"use strict";a("77c4")},adcd:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("splitpanes",{ref:"mainSplit"},[a("pane",{attrs:{size:e.splitSize[0]}},[a("div",{staticClass:"split-container"},[a("h2",[e._v("顧客")]),a("TableView",{ref:"main",staticClass:"table",attrs:{data:e.data,"column-options":e.columnOptions[0],form:e.formBody[0],"table-options":{isCanSelection:!0,deleteMessage:"刪除顧客後，所有訂單將歸類為一般顧客，並且無法更改訂單資訊。"},page:e.page[0],"page-size":e.pageSize[0],target:0,loading:e.loading[0]},on:{search:e.getDataset,refresh:e.getDataset,delete:e.deleteDataset,create:e.createDataset,edit:e.editDataset,"select-row":e.onSelectRow,"size-change":e.handlePageSizeChange,"page-change":e.handlePageChange}})],1)]),a("pane",{attrs:{size:e.splitSize[1]}},[e.selectRow&&Object.keys(e.selectRow).length>0?a("div",{staticClass:"split-container"},[a("h2",[e._v(e._s(e.selectRow.name)+" 點餐記錄")]),a("TableView",{ref:"sub",staticClass:"table",attrs:{data:e.subData,"column-options":e.columnOptions[1],form:e.formBody[1],page:e.page[1],"page-size":e.pageSize[1],target:1,"target-object":{menu:e.selectRow},loading:e.loading[1]},on:{search:function(t){return e.getSubDataset(e.selectRow.id,t)},refresh:function(t){return e.getSubDataset(e.selectRow.id)},delete:e.deleteSubDataset,create:e.createSubDataset,edit:e.editSubDataset,"size-change":e.handlePageSizeChange,"page-change":e.handlePageChange}})],1):e._e()])],1)],1)},s=[],r=(a("d3b7"),a("4c53"),a("4ec3")),i=a("512e"),c=a("0253"),o=a("6464"),u={name:"Customer",components:{Splitpanes:i["Splitpanes"],Pane:i["Pane"],TableView:c["a"]},data:function(){return{loading:[!1,!1],page:[1,1],pageSize:[10,10],splitSize:[50,50],data:[],selectRow:{},subData:[]}},computed:{columnOptions:function(){return[[{label:"ID",field:"id",type:"text",inputType:"text"},{label:"顧客姓名",field:"name",type:"text",inputType:"text"},{label:"電話",field:"phone",type:"text",inputType:"text"},{label:"性別",field:"gender",type:"text",inputType:"text"},{label:"年齡",field:"age",type:"number",inputType:"number"}],[{label:"訂單狀態",field:"status.name",type:"text",inputType:"el-select"},{label:"顧客",field:"customer.name",type:"text",inputType:"el-select"},{label:"結帳狀況",field:"checkOut",type:"text",inputType:"el-radio-group"},{label:"序號",field:"orderID",type:"number",inputType:"number"},{label:"桌號",field:"desk",type:"number",inputType:"number"},{label:"產生時間",field:"createDateTime",type:"date"},{label:"訂單來源",field:"orderFrom",type:"text",inputType:"text"}]]},formBody:function(){return[[{label:"顧客姓名",field:"name",type:"text",inputType:"el-input"},{label:"電話",field:"phone",type:"text",inputType:"el-input"},{label:"暗號",field:"passcode",type:"text",inputType:"el-input"},{label:"性別",field:"gender",type:"text",inputType:"el-radio-group",dataset:[{value:"M",label:"男"},{value:"F",label:"女"},{value:"O",label:"其他"}]},{label:"年齡",field:"age",type:"number",inputType:"el-input-number"}]]}},mounted:function(){this.getDataset()},methods:{getDataset:function(e){var t=this;this.$set(this.loading,0,!0);var a="?page="+this.page[0]+"&page_size="+this.pageSize[0];e&&(a+="&search="+e),Object(r["u"])(a).then((function(e){t.data=e.data})).catch((function(e){Object(o["a"])("error","Error",e,!1)})).finally((function(){t.$set(t.loading,0,!1)}))},deleteDataset:function(e){var t=this;Object(r["e"])(e.id).then((function(e){Object(o["a"])("success","Delete Success",e.data,!1),t.getDataset()})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},createDataset:function(e){var t=this;Object(r["O"])(e).then((function(e){Object(o["a"])("success","Create Success",e.data,!1),t.$refs["main"].createDialog=!1,t.$refs["main"].formBody={},t.$refs["main"].editItem={},t.getDataset()})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},editDataset:function(e){var t=this;Object(r["ab"])(e.id,e.data).then((function(e){Object(o["a"])("success","Edit Success",e.data,!1),t.$refs["main"].createDialog=!1,t.$refs["main"].formBody={},t.$refs["main"].editItem={},t.getDataset()})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},onSelectRow:function(e){this.selectRow=e,e&&(this.splitSize=[30,70],this.getSubDataset(e.id))},getSubDataset:function(e,t){var a=this;this.$set(this.loading,1,!0);var n="?customer="+e+"&page="+this.page[1]+"&page_size="+this.pageSize[1];t&&(n+="&search="+t),Object(r["E"])(n).then((function(e){a.subData=e.data})).catch((function(e){Object(o["a"])("error","Error",e,!1)})).finally((function(){a.$set(a.loading,1,!1)}))},deleteSubDataset:function(e){var t=this;Object(r["k"])(e.id).then((function(e){Object(o["a"])("success","Delete Success",e.data,!1),t.getSubDataset(t.selectRow.id)})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},createSubDataset:function(e){var t=this;Object(r["U"])(e).then((function(e){Object(o["a"])("success","Create Success",e.data,!1),t.$refs["sub"].createDialog=!1,t.$refs["sub"].formBody={},t.$refs["sub"].editItem={},t.getSubDataset(t.selectRow.id)})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},editSubDataset:function(e){var t=this;Object(r["gb"])(e.id,e.data).then((function(e){Object(o["a"])("success","Edit Success",e.data,!1),t.$refs["sub"].createDialog=!1,t.$refs["sub"].formBody={},t.$refs["sub"].editItem={},t.getSubDataset(t.selectRow.id)})).catch((function(e){return e.response?Object(o["a"])("error","Error",e.response.data,!1):Object(o["a"])("error","Error",e,!1)}))},handlePageSizeChange:function(e){switch(this.$set(this.pageSize,e[0],e[1]),e[0]){case 0:return this.getDataset();case 1:return this.getSubDataset(this.selectRow.id)}},handlePageChange:function(e){switch(this.$set(this.page,e[0],e[1]),e[0]){case 0:return this.getDataset();case 1:return this.getSubDataset(this.selectRow.id)}}}},l=u,p=(a("9b62"),a("2877")),d=Object(p["a"])(l,n,s,!1,null,null,null);t["default"]=d.exports},af03:function(e,t,a){var n=a("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}}]);